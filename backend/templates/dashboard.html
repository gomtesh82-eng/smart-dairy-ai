<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Smart Dairy Dashboard</title>
   <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
   <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>

<div class="header">
    <img src="{{ url_for('static', filename='images/logo.png') }}" class="logo">
    <div class="header-text">
        <h2>Smart Dairy AI</h2>
        <p>Farmer Dashboard</p>
    </div>
</div>


<!-- Sidebar -->
<div class="sidebar">
    <a href="/" class="{% if request.path == '/' %}active{% endif %}">Dashboard</a>
    <a href="/milkentry" class="{% if request.path == '/milkentry' %}active{% endif %}">Milk Entry</a>
    <a href="/clear_today" class="{% if request.path == '/clear_today' %}active{% endif %}">Clear Today</a>
    <a href="/weekly" class="{% if request.path == '/weekly' %}active{% endif %}">Weekly Report</a>
    <a href="/monthly_report" class="{% if request.path == '/monthly_report' %}active{% endif %}">Monthly Report</a>
    <a href="/logout">Logout</a>
</div>

<!-- Main Content -->
<div class="main">
    <h2>Dashboard Overview</h2>

    <!-- Quick Stats -->
    <div class="quick-stats">
        <div class="card">
            <h3>Total Cows</h3>
            <p>{{ total_cows }}</p>
        </div>
        <div class="card">
            <h3>Average Milk/Day</h3>
            <p>{{ avg_milk }} L</p>
        </div>
        <div class="card">
            <h3>Total Income (Year)</h3>
            <p>₹ {{ total_income_year }}</p>
        </div>
    </div>

    <!-- Daily & Monthly Cards -->
    <div class="cards">
        <div class="card">
            <h3>Today's Milk</h3>
            <p>{{ today_milk }} L</p>
        </div>
        <div class="card">
            <h3>Today's Income</h3>
            <p>₹ {{ today_income }}</p>
        </div>
        <div class="card">
            <h3>Month Milk</h3>
            <p>{{ month_milk }} L</p>
        </div>
        <div class="card">
            <h3>Month Income</h3>
            <p>₹ {{ month_income }}</p>
        </div>
        <div class="card alert">
            <h3>Milk Status</h3>
            <p class="status {{ status_color }}">{{ milk_status }}</p>
        </div>
    </div>

    <!-- Alerts Section -->
    {% if alerts %}
    <h2>Alerts</h2>
    <div class="cards">
        {% for alert in alerts %}
        <div class="card alert">
            <h3>{{ alert.title }}</h3>
            <p>{{ alert.message }}</p>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Charts Row -->
<div class="chart-row">

    <!-- Last 7 Days -->
    <div class="chart-card">
        <h3>Milk Production - Last 7 Days</h3>
        <canvas id="milkChart"></canvas>
    </div>

    <!-- Monthly Trend -->
    <div class="chart-card">
        <h3>Monthly Milk Trend</h3>
        <canvas id="monthChart"></canvas>
    </div>

</div>


</div>
<!-- Hidden data for charts -->
<div id="chart-data"
     data-dates='{{ dates | default([]) | tojson | safe }}'
     data-quantities='{{ quantities | default([]) | tojson | safe }}'
     data-monthlabels='{{ month_labels | default([]) | tojson | safe }}'
     data-monthdata='{{ month_quantities | default([]) | tojson | safe }}'>
</div>
<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Dashboard JS -->
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>

</body>
</html>
